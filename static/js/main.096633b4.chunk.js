(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e){e.exports={status:"ok",data:{begin_ts:1540425600,end_ts:1540511999,components:[{title:"Right Rear Turn Signal",subsystem_id:1,states:[{level:"Fail",appear_ts:1540425e3,descriptions:"Front Motor Inverter power supply failure"},{level:"Warning",appear_ts:1540456901}]},{title:"Steering & Brakes",subsystem_id:5,states:[{level:"Ok",appear_ts:1540456901}]}]}}},31:function(e,t,n){e.exports=n(45)},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),i=n(26),o=n(7),s=n(12),c=n(30),l=n(28),u=n(17),d={FETCHED_SIGNALS:"FETCHED_SIGNALS",REQUESTED_SIGNALS:"REQUESTED_SIGNALS",REQUESTED_SIGNALS_SUCCEEDED:"REQUESTED_SIGNALS_SUCCEEDED",REQUESTED_SIGNALS_FAILED:"REQUESTED_SIGNALS_FAILED",UPDATE_FILTERS:"UPDATE_FILTERS"},h=function(){return{type:d.FETCHED_SIGNALS}},p=function(){return{type:d.REQUESTED_SIGNALS}},E=function(e){return{type:d.REQUESTED_SIGNALS_SUCCEEDED,data:e}},f=function(e){return{type:d.REQUESTED_SIGNALS_FAILED,error:e}},g=function(e){return{type:d.UPDATE_FILTERS,filteredIds:e}},v={filteredIds:[],signals:void 0,isLoading:!0,error:""},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.REQUESTED_SIGNALS:return Object(u.a)({},e,{isLoading:!0,error:null});case d.REQUESTED_SIGNALS_SUCCEEDED:return Object(u.a)({},e,{signals:t.data,isLoading:!1});case d.REQUESTED_SIGNALS_FAILED:return Object(u.a)({},e,{isLoading:!1,error:t.error});case d.UPDATE_FILTERS:return Object(u.a)({},e,{filteredIds:t.filteredIds});default:return e}},S=n(16),b=n.n(S),_=n(18),D=n(23),y=b.a.mark(L),I=b.a.mark(w);function L(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)(p());case 3:if("ok"!==D.status){e.next=6;break}return e.next=6,Object(_.a)(E(D.data));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(_.a)(f(e.t0.message));case 12:case"end":return e.stop()}},y,null,[[0,8]])}function w(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.b)(d.FETCHED_SIGNALS,L);case 2:case"end":return e.stop()}},I)}var O=w,j=(n(42),n(9)),A=n(10),k=n(13),T=n(11),C=n(14),R=n(4),U=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(k.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).scaleColor=R.g(R.d),n.scaleHeight=R.f(),n.scaleWidth=R.e().padding(.1),n.handleMouseMove=function(e){var t=n.viz.getBoundingClientRect(),a=e.clientX-t.left;R.h(n.viz).selectAll(".cursor-line").attr("x",a)},n}return Object(C.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.updateChart();var e=this.props,t=e.data;e.height,e.animDuration;console.log(t),window.addEventListener("mousemove",this.handleMouseMove)}},{key:"componentDidUpdate",value:function(){this.updateChart()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove)}},{key:"updateChart",value:function(){var e=this;console.log("updateChart"),this.updateScales();var t=this.props,n=(t.animDuration,t.data.components),a=t.filteredIds,r=(t.height,t.width),i=n.filter(function(e){return!a.includes(e.subsystem_id)});console.log("filteredComponents",i);var o=R.h(this.viz).selectAll(".line").data(i);o.exit().remove(),o.enter().append("rect").attr("y",function(t,n){return e.scaleHeight(n)}).attr("height",3).attr("x",250).attr("width",r-290).style("fill","#35b485").attr("class","line"),R.h(this.viz).selectAll(".group").data(i).enter().append("g").attr("class","group").attr("transform",function(t,n){return"translate(40, ".concat(e.scaleHeight(n),")")}).call(R.a().on("start",this.dragStarted).on("drag",this.dragged).on("end",this.dragEnded)).append("text").text(function(e){return e.title}).attr("class","label")}},{key:"updateScales",value:function(){var e=this.props,t=e.data.components,n=e.width,a=e.height,r=e.padding;this.scaleColor.domain([0,t.length]),this.scaleWidth.domain(t.map(function(e){return e.title})).range([r,n-r]),this.scaleHeight.domain(R.c(t,function(e,t){return t})).range([a-r,r])}},{key:"dragStarted",value:function(){R.h(this).classed("active",!0)}},{key:"dragged",value:function(e){R.h(this).attr("transform","translate(40, ".concat(R.b.y,")"))}},{key:"dragEnded",value:function(){R.h(this).classed("active",!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height;return r.a.createElement("svg",{ref:function(t){return e.viz=t},width:n,height:a},r.a.createElement("rect",{className:"cursor-line",y:0,width:2,height:a}))}}]),t}(r.a.Component);U.defaultProps={animDuration:600};var N=U,F=n(29),x=(n(43),function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(k.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleFetchRates=function(e){var t=n.props.filteredIds;~t.indexOf(e)?n.props.dispatch(g(t.filter(function(t){return t!==e}))):n.props.dispatch(g([].concat(Object(F.a)(t),[e])))},n}return Object(C.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.components;return r.a.createElement("div",{className:"controls-block"},t.map(function(t){return r.a.createElement("button",{key:t.subsystem_id,className:"controls-block__btn",onClick:function(){return e.handleFetchRates(t.subsystem_id)}},t.title)}))}}]),t}(a.PureComponent)),G=Object(s.b)(function(e){return{filteredIds:e.filteredIds,isLoading:e.isLoading,signals:e.signals,error:e.error}})(x),Q=(n(44),function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(k.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleFetchRates=function(){n.props.dispatch(h())},n}return Object(C.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.handleFetchRates()}},{key:"render",value:function(){var e=this.props,t=e.signals,n=e.isLoading,a=e.filteredIds;return n?r.a.createElement("div",null,"Loading"):r.a.createElement("div",{className:"App"},r.a.createElement(G,{components:t.components}),r.a.createElement(N,{filteredIds:a,data:t,height:500,width:1280,padding:30}))}}]),t}(a.PureComponent)),M=Object(s.b)(function(e){return{filteredIds:e.filteredIds,isLoading:e.isLoading,signals:e.signals,error:e.error}})(Q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=Object(c.a)(),P=Object(o.createStore)(m,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(H)));H.run(O),Object(i.render)(r.a.createElement(s.a,{store:P},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.096633b4.chunk.js.map